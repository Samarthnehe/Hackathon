<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="style.css">
    <title>WECARE-SCAN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/style.css" rel="stylesheet" media="screen">
    <link href="./css/mobile-style.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" href="./icon1.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- <script type="text/javascript" src="https://addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script> -->
</head>

<body style="background-image: url(./pres.png);
height: 100vh;
background-repeat: no-repeat;
background-size: cover;height: 100vh;">
     <div id="preloader"></div>
    <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top " >
        <div class="container-fluid">
          <img src="./icon.png" height="60px" width="120px" id="mainlogo">
          <button  class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarToggle">
            <div class="navbar-nav mr-auto">
             
            </div>
           
            <div class="navbar-nav">
              <a class="nav-item nav-link" href="index.html" >Home</a>
              <a class="nav-item nav-link" href="about.html">About</a>
            
              <a class="nav-item nav-link" href="index.html#services" >Services</a>
              <a class="nav-item nav-link" href="#contact">Contact </a>
              <a class="nav-item nav-link" href="login.html" >Login </a>
            </div>
            
          </div>
          
        </div>
      </nav>
    <div class="mainer" style="margin: 8em 0px;">
        <div class="container">
            <div class="title" style="margin:2em auto">
                <h1><b>Prescription Scan</b></h1>
               
            </div>
            <div class="dropzone">
                <div class="info"></div>
            </div>
            <div id="scanned">
            </div>
            <div title="Add to Calendar" class="addeventatc">
              Add to Calendar
              <span class="start">12/04/2020 08:00 AM</span>
              <span class="end">12/04/2020 10:00 AM</span>
              <span class="timezone">America/Los_Angeles</span>
              <span class="title">Summary of the event</span>
              <span class="description">Description of the event</span>
              <span class="location">Location of the event</span>
          </div>
        </div>
    </div>
  
   
    <script>
      AOS.init();
    </script>
    <script>
        $(document).ready(function () {
  $(window).on('scroll', function () {

  if ($(this).scrollTop() > 0) {
      if (!$('nav').hasClass('navbar-scrolled')) {
          $('nav').addClass('navbar-scrolled');
          console.log()
      }
  } else {
      if ($('nav').hasClass('navbar-scrolled')) {
          $('nav').removeClass('navbar-scrolled');
      }
  }
  });
 
})

const map = document.querySelector('#contact')

// simulates arriving at #Who-We-Are for the purpose of this example
  
      addEventListener('DOMContentLoaded', event => {
      if (window.location.hash === 'contact') {
          map.scrollIntoView({behavior: "smooth", block: "start"});
      }
      });
      </script>
    
    <script type="text/javascript" src="./js/imgur.js"></script>
    <!-- <script type="text/javascript" src="./js/upload.js"></script> -->
    
    <script>
      
      var feedback = function(res) {
          if (res.success === true) {
              var get_link = res.data.link.replace(/^http:\/\//i, 'https://');
              document.querySelector('.status').classList.add('bg-success');
              // document.querySelector('.status').innerHTML =
              //     'Image : ' + '<br><input class="image-url" value=\"' + get_link + '\"/>' + '<img class="img" alt="Imgur-Upload" src=\"' + get_link + '\"/>';
          // document.querySelector('.status').innerHTML =
              //     'Image : ' + '<br><input class="image-url" value=\"' + get_link + '\"/>';
          var url="https://api.ocr.space/parse/imageurl?apikey=de092d644088957&url="+get_link +"&OCREngine=2";
            console.log(url);
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
              if (this.readyState == 4 && this.status == 200) {
                var data=JSON.parse(this.responseText);
                data=data.ParsedResults[0].ParsedText;
                data=JSON.stringify(data)
                // console.log(data);
              data=data.split("\\n");
              var j=[]
              var show="<span><strong style='text-align:center;'>Prescription</strong> <br> ";
                for(var i=14;i<data.length;i=i+3){
              var k={"name":data[i],"frequency":data[i+1],"description":data[i+2]};
              show=show+" Medicine: "+data[i]+" <br> "+"Frequency: <br>";

              if(data[i+1][0]=='1'){
                show=show+"Morning:   10 AM <br> ";
                show=show+'<div title="Add to Calendar" class="addeventatc" style="visibility:visible;">Add to Calendar<span class="start">12/04/2020 08:00 AM</span><span class="end">12/04/2020 10:00 AM</span><span class="timezone">America/Los_Angeles</span><span class="title">Take Medicine</span><span class="description">Description of the event</span><span class="location">Location of the event</span></div><br>'
              }
              if(data[i+1][2]=='1'){
                show=show+"Afternoon: 2 PM   ";
                show=show+"<div title='Add to Calendar' class='addeventatc'>Add to Calendar<span class='start'>12/04/2020 08:00 AM</span><span class='end'>12/04/2020 10:00 AM</span><span class='timezone'>America/Los_Angeles</span><span class='title'>Take Medicine</span><span class='description'>Description of the event</span><span class='location'>Location of the event</span></div><br>"
              }
              if(data[i+1][4]=='1'){
                show=show+"Evening:   6 PM   ";
                show=show+"<div title='Add to Calendar' class='addeventatc'>Add to Calendar<span class='start'>12/04/2020 08:00 AM</span><span class='end'>12/04/2020 10:00 AM</span><span class='timezone'>America/Los_Angeles</span><span class='title'>Take Medicine</span><span class='description'>Description of the event</span><span class='location'>Location of the event</span></div><br>"
              }
              if(data[i+1][6]=='1'){
                show=show+"Night:     9 PM   ";
                show=show+"<div title='Add to Calendar' class='addeventatc'>Add to Calendar<span class='start'>12/04/2020 08:00 AM</span><span class='end'>12/04/2020 10:00 AM</span><span class='timezone'>America/Los_Angeles</span><span class='title'>Take Medicine</span><span class='description'>Description of the event</span><span class='location'>Location of the event</span></div><br>"
              }

              show=show+" <br> "+"Description: "+data[i+2]+" <br><br> ";
                  j.push(k);
                  // console.log(data[i]+" "+data[i+1]+" "+data[i+2]);
              }
              show=show+"</span>";
              console.log(j);
              document.getElementById("scanned").classList.add("dropzone1");
              document.getElementById("scanned").innerHTML=show;
              console.log(show);
            
              }
            };
            xhttp.open("GET", url, true);
            xhttp.send();
          }
      };

      new Imgur({
          clientid: '8740ef1c6f7e22b', //You can change this ClientID
          callback: feedback
      });


    </script>  
    <script type="text/javascript" src="https://addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script>  


    <!-- <script type="text/javascript" src="https://addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script> -->
       <script>
        $(function () {
        setTimeout(function () {
          $('#preloader').fadeOut('slow', function () {
            $(this).remove();
          });
        }, 2000);
      });
      </script>
</body>

</html>